var m1=angular.module("pro",["ionic"]);m1.config(function(t){t.state("aaa",{url:"/index",templateUrl:"temp/shujia.html",controller:"shujia"}).state("bbb",{url:"/tuijian",templateUrl:"temp/tuijian.html",controller:"tuijian"}).state("ccc",{url:"/wode",templateUrl:"temp/wode.html",controller:"wode"}).state("login",{url:"/wode/login",templateUrl:"temp/login.html",controller:"login"}).state("register",{url:"/wode/register",templateUrl:"temp/register.html",controller:"register"}).state("chapter",{url:"/index/chapter/:id",templateUrl:"temp/chapter.html",controller:"chapter"}).state("aaa.shoucang",{url:"/index/shoucang",templateUrl:"temp/shoucang.html",controller:"shoucang"}).state("aaa.xiazai",{url:"/index/xiazai",templateUrl:"temp/xiazai.html",controller:"xiazai"})}),m1.controller("demo",function(t,o,a){o.go("aaa")}),m1.controller("tuijian",["$scope","$state","$http",function(t,o,a){t.myActiveSlide=0,t.datalist=[],t.doRefresh=function(){t.$broadcast("scroll.refreshComplete")},t.datalist2=[],a({method:"get",url:"mock.json"}).success(function(o){console.log(o);for(var a=0;a<o.length;a++)t.datalist.push(o[a])}).error(function(t){console.log(t)}),t.getDetail=function(t){localStorage.setItem("detail",t),console.log(t)}}]),m1.controller("wode",["$scope","$state","$http",function(t,o,a){t.clickLogin=function(){o.go("login")}}]),m1.controller("login",function(t,o,a){t.fanhui=function(){window.history.back()},t.toRegister=function(){o.go("register")},t.data={},t.login=function(){var e=t.data.username,l=t.data.psw;""==e?alert("请输入用户名"):""==l?alert("请输入密码"):a({method:"post",url:"http://stuapi.ysd3g.com/api/login",params:{un:e,pwd:l,token:"aa4ccde8-3b85-476d-b68b-7f78f72e74d1"}}).success(function(t){console.log(t);t=angular.fromJson(t);console.log(t),1==t.success?(alert("登录成功"),o.go("ccc")):alert("登录失败")})}}),m1.controller("register",function(t,o,a){t.data={},t.fanhui=function(){window.history.back()},t.register=function(){console.log(t.data.psw),void 0==t.data.username?alert("请输入用户名"):void 0==t.data.psw?alert("请输入密码"):a({method:"POST",url:"http://stuapi.ysd3g.com/api/CreateUser",params:{loginName:t.data.username,pwd:t.data.psw,token:"aa4ccde8-3b85-476d-b68b-7f78f72e74d1"}}).success(function(t){console.log(t);var a=angular.fromJson(t);console.log(a.success),1==a.success?(alert("注册成功"),o.go("login")):alert("注册失败")})}}),m1.controller("chapter",function(t,o,a){t.fanhui=function(){window.history.back()},a({method:"get",url:"mock.json"}).success(function(a){console.log(a);for(var e=0;e<a.length;e++){console.log(a[e].dataImg),t.datalist2=a[e].dataImg;for(var l=0;l<a[e].dataImg.length;l++)if(o.id==a[e].dataImg[l].id){t.datalist=a[e].dataImg[l].detail;break}}console.log(t.datalist)}),t.startRead=function(){},t.shoucang=function(){var t=localStorage.getItem("id")?JSON.parse(localStorage.getItem("id")):[];-1==t.indexOf(o.id)&&t.push(o.id),alert("收藏成功"),localStorage.setItem("id",JSON.stringify(t)),console.log(localStorage.getItem("id"))}}),m1.controller("shujia",function(t,o,a,e){t.doRefresh=function(){t.$broadcast("scroll.refreshComplete")},e.go("aaa.shoucang"),t.m1=!0,t.m2=!1,t.m3=!1,t.shoucang=function(){e.go("aaa.shoucang"),t.m1=!0,t.m2=!1,t.m3=!1},t.xiazai=function(){e.go("aaa.xiazai"),t.m1=!1,t.m2=!0,t.m3=!1},t.lishi=function(){t.m1=!1,t.m2=!1,t.m3=!0}}),m1.controller("shoucang",function(t,o,a,e){t.doRefresh=function(){t.$broadcast("scroll.refreshComplete")};var l=JSON.parse(localStorage.getItem("id"));console.log(l),t.datalist=[],a({method:"get",url:"mock.json"}).success(function(o){for(var a=0;a<o.length;a++){console.log(o[a].dataImg);for(var e=0;e<o[a].dataImg.length;e++)for(var n=0;n<l.length;n++)l[n]==o[a].dataImg[e].id&&t.datalist.push(o[a].dataImg[e])}})}),m1.controller("xiazai",function(t,o,a,e){});